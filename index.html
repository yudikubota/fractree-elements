<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fractree Logo – Animatable & Recordable</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.svg">

  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>
  <!-- Mobile menu toggle -->
  <button id="mobileMenuToggle">☰ Controls</button>

  <!-- Mobile overlay -->
  <div id="mobileOverlay"></div>

  <!-- ───────────────────────── SIDEBAR ────────────────────────── -->
  <aside id="sidebar">
    <h2>Core r / d</h2>
    <label>r (inner) <span id="rVal">80</span> px
      <input id="r" type="range" min="40" max="100" value="80">
      <input id="rVel" type="number" step="1" value="0" title="px / sec">
    </label>
    <label>d (offset) <span id="dVal">60</span> px
      <input id="d" type="range" min="10" max="60" value="60">
      <input id="dVel" type="number" step="1" value="0" title="px / sec">
    </label>

    <hr>
    <h2>Spokes</h2>
    <label>Spoke count <span id="numLinesVal">32</span>
      <input id="numLines" type="range" min="4" max="120" value="32">
      <input id="numLinesVel" type="number" step="1" value="0" title="spokes / sec">
    </label>
    <label>Min thick <span id="minThickVal">5</span> px
      <input id="minThick" type="range" min="1" max="20" value="5">
      <input id="minThickVel" type="number" step="1" value="0" title="px / sec">
    </label>
    <label>Max thick <span id="maxThickVal">22</span> px
      <input id="maxThick" type="range" min="1" max="40" value="22">
      <input id="maxThickVel" type="number" step="1" value="0" title="px / sec">
    </label>
    <label>Peak angle <span id="peakAngleVal">90</span>°
      <input id="peakAngle" type="range" min="0" max="360" value="90">
      <input id="peakAngleVel" type="number" step="1" value="0" title="deg / sec">
    </label>

    <hr>
    <h2>Start‑spoke Offsets</h2>
    <label>Front start <span id="frontRotVal">3</span>°
      <input id="frontRot" type="range" min="0" max="360" value="3">
      <input id="frontRotVel" type="number" step="1" value="0" title="deg / sec">
    </label>
    <label>Back start <span id="backRotVal">0</span>°
      <input id="backRot" type="range" min="0" max="360" value="0">
      <input id="backRotVel" type="number" step="1" value="0" title="deg / sec">
    </label>

    <hr>
    <h2>Masks</h2>
    <label>Mask rotation <span id="maskRotVal">180</span>°
      <input id="maskRot" type="range" min="0" max="360" value="180">
      <input id="maskRotVel" type="number" step="1" value="0" title="deg / sec">
    </label>
    <label>Auxiliary Offset (h) <span id="hVal">150</span> px
      <input id="h" type="range" min="50" max="250" value="150">
      <input id="hVel" type="number" step="1" value="0" title="px / sec">
    </label>

    <hr>
    <h2>Colours</h2>
    <label>Front <input id="colFront" type="color" value="#000000"></label>
    <label>Back <input id="colBack" type="color" value="#000000"></label>

    <hr>
    <label><input id="invert" type="checkbox" checked>Invert direction</label>

    <hr>
    <button id="playBtn">Play</button>
    <button id="recordBtnMerged">Record Merged</button>
    <button id="stopRecBtnMerged" disabled>Stop & Download</button>
    <button id="recordBtnAux">Record Aux</button>
    <button id="stopRecBtnAux" disabled>Stop & Download</button>
    <p><small>Display size adjusts to screen</small></p>
  </aside>

  <!-- ────────────────────── STAGE / CANVAS ───────────────────── -->
  <main id="stage">
    <!-- Preview Section (Components) -->
    <div class="previewSection">
      <h4>🔍 Component Previews</h4>
      <div class="svgRow">
        <div class="previewContainer">
          <label>Front Layer</label>
          <svg id="svgFront"></svg>
        </div>
        <div class="previewContainer">
          <label>Back Layer</label>
          <svg id="svgBack"></svg>
        </div>
      </div>
    </div>

    <!-- Main Display (Final Result) -->
    <div class="mainDisplay">
      <h3>🎯 Final Result</h3>
      <svg id="svgMerged"></svg>
    </div>

    <!-- Auxiliary Masked Display -->
    <div class="auxDisplay">
      <h3>✨ Auxiliary Masked Result</h3>
      <svg id="svgAuxiliaryMasked"></svg>
    </div>

    <!-- Hidden canvases for recording -->
    <canvas id="captureMerged" width="400" height="400" style="display:none"></canvas>
    <canvas id="captureAux" width="400" height="400" style="display:none"></canvas>
  </main>

  <!-- JavaScript Modules -->
  <!-- Load in dependency order: utilities first, then main app -->
  <script src="assets/js/mobile.js"></script>
  <script src="assets/js/geometry.js"></script>
  <script src="assets/js/animation.js"></script>
  <script src="assets/js/main.js"></script>
</body>

</html>